# Linux常用命令

### 一、linux目录处理命名
##### 1.建立目录
> `mkdir -p [目录名] `
> * -p 递归创建(在下级目录不存在时可以创建)

##### 2.切换目录
> `cd [目录]`
> `cd -` 回到上次目录
> `cd ..`回到上级目录

##### 3.显示当前所在位置
> `pwd`

##### 4.删除目录
> `rmdir [目录名]` 只能删除空白目录
> `rm -rf [文件或目录]` 
> * -r 删除目录；-f强制

##### 5.复制命名
> `cp [选项] [原文件或目录] [目标目录]`
> * -r 复制目录；-p连带文件属性；-d若原文件是链接文件，复制链接属性；
> * -a相当于-pdr(与源文件一模一样)

##### 6.剪切或改名
> `mv [原文件或目录] [目标目录]`
> 不需要加 `-r`
> 原文件和目标文件在同一个目录下就是**改名命令**

### 二、常见目录
* /根目录
* /bin 系统命令保存目录(普通用户就可以读取的命令) /sbin(root用户)
* /boot 启动目录，启动相关文件
* /dev 设备文件保存目录
* /etc 配置文件保存目录
* /home 普通用户的家目录
* /lib 系统库保存目录
* /mnt 系统挂载目录(一般用这个)
* /media 挂载目录
* /root 超级用户家目录
* /tmp 临时目录
* /proc 直接写入内存
* /sys 直接写入内存
* /usr 系统软件支援目录
* /var 系统相关文档内容

### 三、链接命令
##### 1.ln命令
> `ln -s [原文件] [目标文件]` 生成链接文件
> * -s 创建软链接

1. 类似windows的快捷方式
2. 软链接有自己的I节点和Block块，但是只有文件的文件名和I节点号，没有实际的文件数据
3. `lrwxrwxrwx` l软链接 文件权限都为这个
4. 修改任意文件，另一个都会改变
5. 删除原文件，软链接不能使用

### 四、文件搜索命令

##### 1. 文件搜索命名`locate`
> locate 文件名
> 在后台数据库中按文件名进行搜索，速度更快
> /var/lib/mlocate  数据库所在位置
> updatedb 新建立的文件可能没在数据库中，可以更新数据库

##### 2. 命令搜索命令`whereis`与`which`
> `whereis 命令名`  搜索命令所在路径及帮助文档所在位置
> -b 只查找可执行文件
> -m 只查找帮助文件
> `which` 的区别在于 可以看到别名

##### 3. 文件搜索`find`(完全匹配)
> `find [搜索范围] [搜索条件]`
> * `find / -name test.log`
> find是系统中搜索符合条件的文件名。如果需要匹配，使用通配符，通配符是完全匹配
> * `find /root -iname test.log`  不区分大小写
> * `find /root -user root` 按照所有者搜索
> * `find /root -nouser` 查找没有所有者的文件
> * `find /log/ -mtime +10` atime文件访问时间;ctime改变文件属性，mtime修改文件内容
> -10 十天内 10 十天当天 +10 10天前修改
> * `find . -size 25k` 根据文件大小查找(k小写,M大写)
> * `find . -size +20k -a -size -50k` -a==and;-o==or
> * `find . -size -20k -exec ls -lh {} \;` 在搜索出来的结果后面接第二条语句，能处理第一个结果的才行 示例：`find . -size -20k -exec rm -rf {} \` 删除找到的文件

##### 4.搜索字符串命令`grep`(包含匹配)
> `grep [选项] 字符串 文件名`：在文件当中匹配符合条件的字符串
> -i 忽略大小写； -v 排除指定字符串(取反)

### 五、帮助命令
> `man 命令` 获取指定命令的帮助
> `man -f 命令` 相当于`whatis 命令`
> `man -k 命令` 相当于`apropos` 包含有关键字的命令
> `命令 --help` 获取命令选项的帮助 
> `info 命令` 详细文档

### 六、压缩命令
##### 1.zip格式文件
> `zip 压缩文件名 源文件名` 压缩文件
> `zip -r 压缩文件名 源目录` 压缩目录
> `unzip 压缩文件` 解压缩.zip文件

##### 2.gz格式文件
> `gzip 源文件` 压缩为.gz格式的压缩文件，源文件消失
> `gzip -c 源文件 > 压缩文件` 压缩为.gz格式，保留源文件
> `gzip -r 目录` 压缩目录下所有子文件，但不能压缩目录

##### 3.bz2格式文件
> `bzip2 源文件` 压缩为.bz2格式，不保留源文件
> `bzip2 -k 源文件`压缩后保留源文件
> 注：不能压缩目录

##### 4.tar.gz格式
> * 打包命令tar
> `tar -cvf 打包文件名 源文件` 示例:`tar -cvf test.tar test`
> -c:打包;-v:显示过程;-f:指定打包后的文件名
其实.tar.gz格式是先打包为.tar格式，再压缩为.gz格式
> `tar -zcvf 压缩包名.tar.gz 源文件`
> -z:压缩为.tar.gz格式
> `tar -zxvf 压缩包名.tar.gz` 解压缩
> -x:解压缩.tar.gz格式

##### 5.tar.bz2格式
> `tar -jcvf 压缩包名.tar.bz2 源文件`
> -z 压缩为.tar.bz2格式
> `tar -jxvf 压缩包名.tar.bz2`
> -x:解压缩.tar.bz2格式

### 六、关机与重启
> `shutdown [选项] 时间` 会正确保存状态
> -c:取消前一个关机命令;-h:关机;-r:重启
> 其他关机命令(不推荐使用)：
> * halt
> * poweroff
> * init 0
> 其他重启命令：
> * reboot
> * init 6(尽量不用)

补充：系统运行级别
* 0:关机
* 1:单用户(类似Windows中的安全模式)
* 2:不完全多用户，不含NFS服务
* 3:完全多用户
* 4:未分配
* 5:图像界面
* 6.重启
### 七、挂载命令
##### 1.查询与自动挂载
> `mount` 查询系统中已经挂载的设备
> `mount -a` 根据配置文件`/etc/fstab`的内容，自动挂载

##### 2.挂载命令格式
> `mount \[-t 文件系统] [-o 特殊选项] 设备文件名 挂载点`
> -t 文件系统:加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统
> -o 特殊选项:可以指定挂载的额外选项

##### 3.挂载光盘
> `mkdir /mnt/cdrom/` 建立挂载点
> `mount /dev/sr0 /mnt/cdrom/` 挂载光盘

##### 4.卸载命令
> `umount 设备文件名或挂载点`
> `umount /mnt/cdrom`

##### 5.挂载u盘
> `fdisk -l` 查看设备文件名
> `mount -t vfat /dev/sdb1 /mnt/usb/` Linux默认不支持NTFS文件系统

### 八、登录查看命令
> `w` 查看登录用户信息
> `who` 只能查看用户名 登录终端 登录时间(登录来源ip地址)
> `last` 查看当前登录 和以前登录用户的信息。
